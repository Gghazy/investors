<section class="form-panel">
  <div class="form-header">
    <h2 class="form-title">بيانات جهة الإتصال  لشهر {{PeriodName}}  -عام  {{year}} </h2>
    <div>
      <a [routerLink]="'/pages/factory-landing/'+factoryId+'/'+periodId+'/'+approveStatusText" class="back-link">
        رجوع
        <svg height="25" viewBox="0 0 48 48" width="25" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 0h48v48h-48z" fill="none"></path>
          <path d="M40 22h-24.34l11.17-11.17-2.83-2.83-16 16 16 16 2.83-2.83-11.17-11.17h24.34v-4z" style="fill: #666">
          </path>
        </svg>
      </a>
    </div>
  </div>
  <div class="form-body">
    <div class="mb-4 alert alert-fui  alert-dismissible fade show" role="alert">
      <P>
        يتم إدخال أرقام هواتف الموظفين المعنيين مع الحرص على ان تكون أرقام الهواتف صحيحة و مفعلة كذلك البريد الإلكتروني لكل جهة إتصال و من ثم الضغط على خيار حفظ.
       </div>
    <form #f="ngForm" [formGroup]="phoneForm" (submit)="save()">
              <div class="row">
                <div class="col-md-6">
                  <label class="form-label"> رقم الجوال لضابط الإتصال <span class="required">*</span></label>
                  <ngx-intl-tel-input
                    [cssClass]="'form-control'"
                    [onlyCountries]="[CountryISO.SaudiArabia]"
                    [enableAutoCountrySelect]="true"
                    [enablePlaceholder]="false"
                    [searchCountryFlag]="false"
                    [searchCountryField]="[
                      SearchCountryField.Iso2,
                      SearchCountryField.Name
                    ]"
                    [selectFirstCountry]="false"
                    [selectedCountryISO]="CountryISO.SaudiArabia"
                    [enableAutoCountrySelect]="true"
                    [maxLength]="15"
                    [phoneValidation]="true"
                    [separateDialCode]="separateDialCode"
                    [numberFormat]="PhoneNumberFormat.National"
                    name="OfficerPhone"
                    formControlName="OfficerPhone"
                    [enablePlaceholder]="true"
                    [customPlaceholder]="defaultPhone"
                    [disabled]="approveStatus"
                   [value]="'officerPhoneValue'"
                   >
                  </ngx-intl-tel-input>
                
                  <div class="text-danger" *ngIf="submitted && phoneForm.get('OfficerPhone')?.errors">
                    <div *ngIf="phoneForm.get('OfficerPhone')?.hasError('required')">   الرجاء إدخال رقم الجوال  </div>
                    <div *ngIf="phoneForm.get('OfficerPhone')?.hasError('saPhoneNumber')"> الرجاء إدخال رقم جوال سعودي  </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <label class="form-label">
                    البريد الإلكتروني لضابط الإتصال <span class="required">*</span>
                  </label>
                  <div class="input-group mb-3">
                    <input
                      type="email"
                      class="form-control"
                      [value]="contactDetails.OfficerEmail" 
                      name="OfficerEmail"
                      formControlName="OfficerEmail"
                      [disabled]="approveStatus"
                    />
                  </div>
                  <div class="text-danger" *ngIf="submitted && phoneForm.get('OfficerEmail')?.errors">
                    <div *ngIf="phoneForm.get('OfficerEmail')?.hasError('required')">الرجاء إدخال البريد الإلكتروني </div>
                    <div *ngIf="!phoneForm.get('OfficerEmail')?.hasError('required') && phoneForm.get('OfficerEmail')?.hasError('pattern')">عنوان بريد إلكتروني غير صالح</div>
                  </div>
                </div>
              </div>
  
              <div class="row">
                <div class="col-md-6">
                  <label class="form-label"> رقم الجوال لمدير الإنتاج <span class="required">*</span></label>
                  <ngx-intl-tel-input
                    [cssClass]="'form-control'"
                    [onlyCountries]="[CountryISO.SaudiArabia]"
                    [enableAutoCountrySelect]="true"
                    [enablePlaceholder]="false"
                    [searchCountryFlag]="false"
                    [searchCountryField]="[
                      SearchCountryField.Iso2,
                      SearchCountryField.Name
                    ]"
                    [selectFirstCountry]="false"
                    [selectedCountryISO]="CountryISO.SaudiArabia"
                    [maxLength]="15"
                    [phoneValidation]="true"
                    [separateDialCode]="separateDialCode"
                    [numberFormat]="PhoneNumberFormat.National"
                    name="ProductionManagerPhone"
                    formControlName="ProductionManagerPhone"
                    [enablePlaceholder]="true"
                    [customPlaceholder]="defaultPhone"
                    [disabled]="approveStatus"
                  >
                  </ngx-intl-tel-input>
                  <div class="text-danger" *ngIf="submitted && phoneForm.get('ProductionManagerPhone')?.errors">
                    <div *ngIf="phoneForm.get('ProductionManagerPhone')?.hasError('required')">الرجاء إدخال رقم الجوال</div>
                    <div *ngIf="phoneForm.get('ProductionManagerPhone')?.hasError('saPhoneNumber')">الرجاء إدخال رقم جوال سعودي </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <label class="form-label">
                    البريد الإلكتروني لمدير الإنتاج <span class="required">*</span>
                  </label>
                  <div class="input-group mb-3">
                    <input
                      type="email"
                      class="form-control"
                      [value]="contactDetails.ProductionManagerEmail"
                      name="ProductionManagerEmail"
                      formControlName="ProductionManagerEmail"
                      [disabled]="approveStatus"
                    />
                  </div>
                  <div class="text-danger" *ngIf="submitted && phoneForm.get('ProductionManagerEmail')?.errors">
                    <div *ngIf="phoneForm.get('ProductionManagerEmail')?.hasError('required')">الرجاء إدخال البريد الإلكتروني </div>
                    <div *ngIf="!phoneForm.get('ProductionManagerEmail')?.hasError('required') &&  phoneForm.get('ProductionManagerEmail')?.hasError('pattern')">عنوان بريد إلكتروني غير صالح</div>
                  </div>
                </div>
              </div>
  
              <div class="row">
                <div class="col-md-6">
                  <label class="form-label"> رقم الجوال لمدير المالية <span class="required">*</span></label>
                  <ngx-intl-tel-input
                    [cssClass]="'form-control'"
                    [onlyCountries]="[CountryISO.SaudiArabia]"
                    [enableAutoCountrySelect]="true"
                    [enablePlaceholder]="false"
                    [searchCountryFlag]="false"
                    [searchCountryField]="[
                      SearchCountryField.Iso2,
                      SearchCountryField.Name
                    ]"
                    [selectFirstCountry]="false"
                    [selectedCountryISO]="CountryISO.SaudiArabia"
                    [maxLength]="15"
                    [phoneValidation]="true"
                    [separateDialCode]="separateDialCode"
                    [numberFormat]="PhoneNumberFormat.National"
                    name="FinanceManagerPhone"
                    formControlName="FinanceManagerPhone"
                    [enablePlaceholder]="true"
                    [customPlaceholder]="defaultPhone"
                    [disabled]="approveStatus"
                  >
                  </ngx-intl-tel-input>
                  <div class="text-danger" *ngIf="submitted && phoneForm.get('FinanceManagerPhone')?.errors">
                    <div *ngIf="phoneForm.get('FinanceManagerPhone')?.hasError('required')">الرجاء إدخال رقم الجوال</div>
                    <div *ngIf="phoneForm.get('FinanceManagerPhone')?.hasError('saPhoneNumber')">الرجاء إدخال رقم جوال سعودي </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <label class="form-label">
                    البريد الإلكتروني لمدير المالية <span class="required">*</span>
                  </label>
                  <div class="input-group mb-3">
                    <input
                      type="email"
                      class="form-control"
                      name="FinanceManagerEmail"
                      formControlName="FinanceManagerEmail"
                      [disabled]="approveStatus"
                      [value]="contactDetails.FinanceManagerEmail"
                    />
                  </div>
                  <div class="text-danger" *ngIf="submitted && phoneForm.get('FinanceManagerEmail')?.errors">
                    <div *ngIf="phoneForm.get('FinanceManagerEmail')?.hasError('required')">الرجاء إدخال البريد الإلكتروني </div>
                    <div *ngIf="!phoneForm.get('FinanceManagerEmail')?.hasError('required') && phoneForm.get('FinanceManagerEmail')?.hasError('pattern')">عنوان بريد إلكتروني غير صالح</div>

                  </div>
                </div>
              </div>
              <div class="form-footer">
                <div class="col-12">
                  <button class="btn btn-primary me-1" type="submit" [disabled]="approveStatus">حفظ</button>
                  <a [routerLink]="'/pages/factory-landing/'+factoryId+'/'+periodId+'/'+approveStatusText" class="btn btn-danger">الغاء</a>
                </div>
              </div>
            </form> 
  </div>


</section>

<app-terms-modal></app-terms-modal>