<section class="form-panel">
    <div class="form-header">
      <h2 class="form-title">بيانات جهة الإتصال لشهر {{PeriodName}} </h2>
      <div>
        <a [routerLink]="'/pages/Inspector/visit-landing'" class="back-link">
          رجوع
          <svg
            height="25"
            viewBox="0 0 48 48"
            width="25"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M0 0h48v48h-48z" fill="none"></path>
            <path
              d="M40 22h-24.34l11.17-11.17-2.83-2.83-16 16 16 16 2.83-2.83-11.17-11.17h24.34v-4z"
              style="fill: #666"
            ></path>
          </svg>
        </a>
      </div>
    </div>
    <form [formGroup]="phoneForm">

    <div class="form-body">
      <div *ngIf="factoryStatus!=4" class="col-md-12">
        <h3>التحقق من صحة معلومات جهة الاتصال​</h3>
      </div>

     
        <div *ngIf="factoryStatus!=4" class="row">
          <div class="col-md-5">
            <label class="form-label">
              البريد الإلكتروني لضابط الإتصال
            </label>

              <input
                type="email"
                class="form-control"
                placeholder="example@mail.com"
                name="OldOfficerEmail"
                formControlName="OldOfficerEmail"
                [(ngModel)]="request.OldOfficerEmail"
                [disabled]="true"
              />
          </div>

          <div class="col-md-2">
            <label class="form-label"> هل البريد  صحيح؟ </label>
            <select
              class="form-select"
              (change)="onInputChange($event)"
              [(ngModel)]="request.IsOfficerMailCorrect"
              formControlName="IsOfficerMailCorrect"
            >
              <option [ngValue]="true" selected>نعم</option>
              <option [ngValue]="false">لا</option>
            </select>
          </div>

          <div class="col-md-5" *ngIf="request.IsOfficerMailCorrect == false">
            <label class="form-label">
              أدخل البريد الإلكتروني الصحيح<span class="required">*</span>
            </label>
            <input
                type="email"
                class="form-control"
                placeholder="example@mail.com"
                [(ngModel)]="request.NewOfficerEmail"
                formControlName="NewOfficerEmail"
                required=""
              />
              <div class="text-danger" *ngIf="submitted && request.NewOfficerEmail==''">الرجاء إدخال البريد الإلكتروني   </div>
              <div class="text-danger" *ngIf="submitted && phoneForm.get('NewOfficerEmail')?.errors">
                <div *ngIf="phoneForm.get('NewOfficerEmail')?.hasError('pattern')">الرجاء إدخال بريد إلكتروني  صالح</div>
              </div>
              <div class="text-danger" *ngIf="!phoneForm.get('NewOfficerEmail')?.errors">
               {{ onValidNewOfficerEmail()}}
              </div>
             
          </div>
          <!-- <div class="input-group mb-3">
            <input
              type="email"
              class="form-control"
              placeholder="example@mail.com"
              name="FinanceManagerEmail"
              formControlName="NewOfficerEmail"
            />
          </div>
          <div style="color: #F00;" *ngIf="phoneForm.get('FinanceManagerEmail')?.errors && phoneForm.get('FinanceManagerEmail')?.touched">
            <div *ngIf="phoneForm.get('FinanceManagerEmail')?.hasError('required')">هذا الحقل مطلوب</div>
            <div *ngIf="phoneForm.get('FinanceManagerEmail')?.hasError('isValidEmail')">عنوان بريد إلكتروني غير صالح</div>
          </div> -->
        </div>

        <div *ngIf="factoryStatus!=4" class="row"  >
          <div class="col-md-5">
            <label class="form-label"> رقم جوال ضابط الإتصال </label>
            <input
            type="tel"
            class="form-control"
            [(ngModel)]="request.OldOfficerPhoneId"
            formControlName="OldOfficerPhoneId"

            [disabled]="true"
          />
        
          </div>
         

          <div class="col-md-2">
            <label class="form-label"> هل الرقم صحيح؟ </label>
            <select
              class="form-select"
              (change)="onInputChange($event)"
              [(ngModel)]="request.IsOfficerPhoneCorrect"
              formControlName="IsOfficerPhoneCorrect"
            >
              <option [ngValue]="true" selected>نعم</option>
              <option [ngValue]="false">لا</option>
            </select>
          </div>

          <div class="col-md-5" *ngIf="request.IsOfficerPhoneCorrect == false">
            <label class="form-label"> أدخل رقم الجوال الصحيح <span class="required">*</span></label>
           
            <ngx-intl-tel-input
            [cssClass]="'form-control'"
            [onlyCountries]="[CountryISO.SaudiArabia]"
            [enableAutoCountrySelect]="true"
            [enablePlaceholder]="false"
            [searchCountryFlag]="false"
            [searchCountryField]="[
              SearchCountryField.Iso2,
              SearchCountryField.Name
            ]"
            [selectFirstCountry]="false"
            [selectedCountryISO]="CountryISO.SaudiArabia"
            [maxLength]="15"
            [phoneValidation]="true"
            [separateDialCode]="separateDialCode"
            [numberFormat]="PhoneNumberFormat.National"
            name="NewOfficerPhoneId"
            formControlName="NewOfficerPhoneId"
            [enablePlaceholder]="true"
            required=""
            
          >
          </ngx-intl-tel-input>
        
                  <div class="text-danger" *ngIf="submitted && phoneForm.get('NewOfficerPhoneId')?.errors">
                    <div *ngIf="phoneForm.get('NewOfficerPhoneId')?.hasError('required')">الرجاء إدخال رقم الجوال  </div>
                    <div *ngIf="phoneForm.get('NewOfficerPhoneId')?.hasError('saPhoneNumber')">الرجاء إدخال رقم جوال سعودي صالح</div>
                  </div>
                  <div class="text-danger" *ngIf="!phoneForm.get('NewOfficerPhoneId')?.errors">
                    {{onValidNewOfficerPhoneId()}}
                  </div>
          </div>
        </div>

        <div class="col-md-12">
          <label class="form-label"> تعليقات </label>
          <textarea rows="3" class="form-control"   name="Comments" formControlName="Comments"  [(ngModel)]="request.Comments"></textarea>
      </div>
    </div>

    <div class="form-footer">
      <div class="col-12">
        <button [disabled]="inspectorApproved" class="btn btn-primary me-1" type="submit" (click)="save()">حفظ</button>
        <a [routerLink]="'/pages/Inspector/visit-landing'" class="btn btn-danger">الغاء</a>
      </div>
    </div>
    </form>
  </section>